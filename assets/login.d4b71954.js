import{d as x,X as k,P as R,L as S,K as _,f as c,H as C,y as I,i as T,Y as U,B as A,M as y,C as E,_ as P,r as u,o as q,b as D,e as s,t as O,h as g,w as $,G as j,v as z,x as B}from"./index.4588bd4d.js";import F from"./ContainerLayout.282e193e.js";import{T as G}from"./Translations.38e815d2.js";import"./lodash.7e987c90.js";const H=x({name:"UserAccountLogin",components:{UserAccountContainerLayout:F,Promotion:k,Translations:G},setup(){const{proxy:a}=E(),p=R(),d=S(),v=_(),o=c(!0),n=c(""),t=c(""),l=C({email:"vite.admin@gmail.com",password:"123456"}),e=I(),b=T(()=>({title:e.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:o.value,size:"large"},text:e.t("login.signin"),on:{click(r){a.onSubmit(r)}}}],formConfig:[{attrs:{prop:"email",error:n.value,rules:()=>[a.getRequiredRules({trigger:"change",message:e.t("login.plsemail")}),a.getValidatorRules("","blur",{type:"email",message:e.t("login.plscurrentemail")})]},label:e.t("login.email"),prefixIcon:"user-tie",placeholder:e.t("login.plsemail")},{attrs:{prop:"password",error:t.value,rules:()=>a.getRequiredRules({trigger:"change",message:e.t("login.plspwd")})},link:{text:e.t("login.fgtpwd"),click(){}},type:"password",label:e.t("login.pwd"),prefixIcon:"lock",placeholder:e.t("login.plspwd")}]}));function i(r=!1){o.value=r}return i(!0),U(()=>{A(()=>{i(!1)})}),{isLoading:o,inputErrorEmail:n,inputErrorPassword:t,formData:l,configLogin:b,setLoading:i,onSubmit:function(r){o.value||r.validate(async w=>{if(!w)return;n.value="",t.value="",i(!0);const{error:L,data:f,msg:h}=await p.login(l);if(L)return n.value=" ",t.value=h,void i(!1);y.set("token",f.user.token),y.set("name",f.user.username),v.replace(`/${d.params.locale||""}`).then(()=>{a.$message({type:"success",message:e.t("login.logingSuccess")})}).catch(()=>{})})}}}}),K=""+new URL("pinia.7ed2c830.svg",import.meta.url).href,m=a=>(z("data-v-81621390"),a=a(),B(),a),M={class:"user-account-login"},V={class:"user-account-nav"},X={class:"nav-left"},Y=m(()=>s("div",{class:"nav-logo"},null,-1)),J=m(()=>s("div",{class:"nav-circle"},null,-1)),N={class:"nav-title"},Q={class:"nav-right"},W={class:"user-account-body"},Z=m(()=>s("img",{src:K,alt:""},null,-1)),oa=P(H,[["render",function(a,p,d,v,o,n){const t=u("Translations"),l=u("UserAccountContainerLayout"),e=u("Footer");return q(),D("div",M,[s("div",V,[s("div",X,[Y,J,s("div",N,O(a._t("base.systemTitle")),1)]),s("div",Q,[g(t)])]),s("div",W,[g(l,j(a.configLogin,{"form-data":a.formData,onOnSubmit:a.onSubmit}),{titleIcon:$(()=>[Z]),_:1},16,["form-data","onOnSubmit"])]),g(e)])}],["__scopeId","data-v-81621390"]]);export{oa as default};
