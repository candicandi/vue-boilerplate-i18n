import{d as k,X as x,u as R,P as S,L as _,K as C,f as c,H as I,z as T,i as U,Y as A,C as E,M as y,_ as P,r as u,o as q,b as z,e as s,t as D,h as g,w as O,G as $,x as j,y as F}from"./index.4b5a845f.js";import G from"./ContainerLayout.0a11c8ee.js";import{T as H}from"./Translations.4c55fa60.js";import"./lodash.c3269fa0.js";const K=k({name:"UserAccountLogin",components:{UserAccountContainerLayout:G,Promotion:x,Translations:H},setup(){const{proxy:a}=R(),p=S(),d=_(),v=C(),o=c(!0),n=c(""),t=c(""),l=I({email:"vite.admin@gmail.com",password:"123456"}),e=T(),b=U(()=>({title:e.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:o.value,size:"large"},text:e.t("login.signin"),on:{click(r){a.onSubmit(r)}}}],formConfig:[{attrs:{prop:"email",error:n.value,rules:()=>[a.getRequiredRules({trigger:"change",message:e.t("login.plsemail")}),a.getValidatorRules("","blur",{type:"email",message:e.t("login.plscurrentemail")})]},label:e.t("login.email"),prefixIcon:"user-tie",placeholder:e.t("login.plsemail")},{attrs:{prop:"password",error:t.value,rules:()=>a.getRequiredRules({trigger:"change",message:e.t("login.plspwd")})},link:{text:e.t("login.fgtpwd"),click(){}},type:"password",label:e.t("login.pwd"),prefixIcon:"lock",placeholder:e.t("login.plspwd")}]}));function i(r=!1){o.value=r}return i(!0),A(()=>{E(()=>{i(!1)})}),{isLoading:o,inputErrorEmail:n,inputErrorPassword:t,formData:l,configLogin:b,setLoading:i,onSubmit:function(r){o.value||r.validate(async w=>{if(!w)return;n.value="",t.value="",i(!0);const{error:L,data:f,msg:h}=await p.login(l);if(L)return n.value=" ",t.value=h,void i(!1);y.set("token",f.user.token),y.set("name",f.user.username),v.replace(`/${d.params.locale||""}`).then(()=>{a.$message({type:"success",message:e.t("login.logingSuccess")})}).catch(()=>{})})}}}}),M=""+new URL("pinia.7ed2c830.svg",import.meta.url).href,m=a=>(j("data-v-923fce0a"),a=a(),F(),a),V={class:"user-account-login"},X={class:"user-account-nav"},Y={class:"nav-left"},B=m(()=>s("div",{class:"nav-logo"},null,-1)),J=m(()=>s("div",{class:"nav-circle"},null,-1)),N={class:"nav-title"},Q={class:"nav-right"},W={class:"user-account-body"},Z=m(()=>s("img",{src:M,alt:""},null,-1)),oa=P(K,[["render",function(a,p,d,v,o,n){const t=u("Translations"),l=u("UserAccountContainerLayout"),e=u("Footer");return q(),z("div",V,[s("div",X,[s("div",Y,[B,J,s("div",N,D(a._t("base.systemTitle")),1)]),s("div",Q,[g(t)])]),s("div",W,[g(l,$(a.configLogin,{"form-data":a.formData,onOnSubmit:a.onSubmit}),{titleIcon:O(()=>[Z]),_:1},16,["form-data","onOnSubmit"])]),g(e)])}],["__scopeId","data-v-923fce0a"]]);export{oa as default};
