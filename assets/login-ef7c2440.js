import{u as I}from"./vue-i18n.cjs-4f7698a4.js";import{br as k,bp as L,bd as x,bn as C,bo as v}from"./index-a07fc1d4.js";import R from"./ContainerLayout-70bea05d.js";import{T as A}from"./Translations-e695a008.js";import{u as T}from"./useCurrentInstance-178fc0aa.js";import{x as U,r as l,V as $,e as E,o as P,S as V,ai as B,y as D,z as O,A as o,O as q,P as u,I as z,T as F,a7 as p,ak as N,al as j}from"./_plugin-vue_export-helper-7e675be8.js";import"./_commonjsHelpers-87174ba5.js";import"./runtime-dom.esm-bundler-31a74585.js";import"./type-19eb5797.js";import"./index-e6d5c965.js";import"./lodash-d2667470.js";const M=U({name:"UserAccountLogin",components:{UserAccountContainerLayout:R,Promotion:k,Translations:A},setup(){const{proxy:e}=T(),d=L(),g=x(),_=C(),n=l(!0),a=l(""),s=l(""),c=$({email:"vite.admin@gmail.com",password:"123456"}),t=I(),h=E(()=>({title:t.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:n.value,size:"large"},text:t.t("login.signin"),on:{click(i){e.onSubmit(i)}}}],formConfig:[{attrs:{prop:"email",error:a.value,rules(){return[e.getRequiredRules({trigger:"change",message:t.t("login.plsemail")}),e.getValidatorRules("","blur",{type:"email",message:t.t("login.plscurrentemail")})]}},label:t.t("login.email"),prefixIcon:"user-tie",placeholder:t.t("login.plsemail")},{attrs:{prop:"password",error:s.value,rules(){return e.getRequiredRules({trigger:"change",message:t.t("login.plspwd")})}},link:{text:t.t("login.fgtpwd"),click(){}},type:"password",label:t.t("login.pwd"),prefixIcon:"lock",placeholder:t.t("login.plspwd")}]}));function r(i=!1){n.value=i}function y(i){n.value||i.validate(async b=>{if(!b)return;a.value="",s.value="",r(!0);const{error:S,data:f,msg:w}=await d.login(c);if(S){a.value=" ",s.value=w,r(!1);return}v.set("token",f.user.token),v.set("name",f.user.username),_.replace(`/${g.params.locale||""}`).then(()=>{e.$message({type:"success",message:t.t("login.logingSuccess")})}).catch(()=>{})})}return r(!0),P(()=>{V(()=>{r(!1)})}),{isLoading:n,inputErrorEmail:a,inputErrorPassword:s,formData:c,configLogin:h,setLoading:r,onSubmit:y}}}),G=""+new URL("pinia-7ed2c830.svg",import.meta.url).href;const m=e=>(N("data-v-81621390"),e=e(),j(),e),H={class:"user-account-login"},J={class:"user-account-nav"},K={class:"nav-left"},Q=m(()=>o("div",{class:"nav-logo"},null,-1)),W=m(()=>o("div",{class:"nav-circle"},null,-1)),X={class:"nav-title"},Y={class:"nav-right"},Z={class:"user-account-body"},ee=m(()=>o("img",{src:G,alt:""},null,-1));function te(e,d,g,_,n,a){const s=p("Translations"),c=p("UserAccountContainerLayout"),t=p("Footer");return D(),O("div",H,[o("div",J,[o("div",K,[Q,W,o("div",X,q(e._t("base.systemTitle")),1)]),o("div",Y,[u(s)])]),o("div",Z,[u(c,F(e.configLogin,{"form-data":e.formData,onOnSubmit:e.onSubmit}),{titleIcon:z(()=>[ee]),_:1},16,["form-data","onOnSubmit"])]),u(t)])}const de=B(M,[["render",te],["__scopeId","data-v-81621390"]]);export{de as default};
