import{_ as x,d as k,X as S,u as I,P as R,L as _,K as C,f as c,I as T,z as A,i as E,Y as P,C as U,o as q,b as z,e,t as D,h as u,w as O,G as $,M as y,x as j,y as F,r as g}from"./index.dd54e003.js";import G from"./ContainerLayout.b628ad7f.js";import{T as K}from"./Translations.00449a22.js";import"./lodash.bedf7f1b.js";const M=k({name:"UserAccountLogin",components:{UserAccountContainerLayout:G,Promotion:S,Translations:K},setup(){const{proxy:a}=I(),p=R(),d=_(),v=C(),o=c(!0),i=c(""),t=c(""),l=T({email:"vite.admin@gmail.com",password:"123456"}),s=A(),b=E(()=>({title:s.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:o.value,size:"large"},text:s.t("login.signin"),on:{click(r){a.onSubmit(r)}}}],formConfig:[{attrs:{prop:"email",error:i.value,rules:()=>[a.getRequiredRules({trigger:"change",message:s.t("login.plsemail")}),a.getValidatorRules("","blur",{type:"email",message:s.t("login.plscurrentemail")})]},label:s.t("login.email"),prefixIcon:"user-tie",placeholder:s.t("login.plsemail")},{attrs:{prop:"password",error:t.value,rules:()=>a.getRequiredRules({trigger:"change",message:s.t("login.plspwd")})},link:{text:s.t("login.fgtpwd"),click(){}},type:"password",label:s.t("login.pwd"),prefixIcon:"lock",placeholder:s.t("login.plspwd")}]}));function n(r=!1){o.value=r}return n(!0),P(()=>{U(()=>{n(!1)})}),{isLoading:o,inputErrorEmail:i,inputErrorPassword:t,formData:l,configLogin:b,setLoading:n,onSubmit:function(r){o.value||r.validate(async h=>{if(!h)return;i.value="",t.value="",n(!0);const{error:w,data:f,msg:L}=await p.login(l);if(w)return i.value=" ",t.value=L,void n(!1);y.set("token",f.user.token),y.set("name",f.user.username),v.replace(`/${d.params.locale||""}`).then(()=>{a.$message({type:"success",message:s.t("login.logingSuccess")})}).catch(()=>{})})}}}}),m=a=>(j("data-v-107e6037"),a=a(),F(),a),V={class:"user-account-login"},X={class:"user-account-nav"},Y={class:"nav-left"},B=m(()=>e("div",{class:"nav-logo"},null,-1)),H=m(()=>e("div",{class:"nav-circle"},null,-1)),J={class:"nav-title"},N={class:"nav-right"},Q={class:"user-account-body"},W=m(()=>e("img",{src:"assets/pinia.7ed2c830.svg",alt:""},null,-1));var ta=x(M,[["render",function(a,p,d,v,o,i){const t=g("Translations"),l=g("UserAccountContainerLayout"),s=g("Footer");return q(),z("div",V,[e("div",X,[e("div",Y,[B,H,e("div",J,D(a._t("base.systemTitle")),1)]),e("div",N,[u(t)])]),e("div",Q,[u(l,$(a.configLogin,{"form-data":a.formData,onOnSubmit:a.onSubmit}),{titleIcon:O(()=>[W]),_:1},16,["form-data","onOnSubmit"])]),u(s)])}],["__scopeId","data-v-107e6037"]]);export{ta as default};
